# 聚簇索引和非聚簇索引 #

聚簇索引  
在一个B+Tree内的叶节点既保存了索引也保存了行数据
依据B+Tree的特性，行数据的顺序和索引顺序一样，都是有序的

非聚簇索引  
不是聚簇的结构就是非聚簇结构，也就是说，B+Tree内的叶节点保存的是索引和行数据的指针（或主键key，看引擎），真正保存行数据的地方不在这个B+Tree里面

聚集索引和非聚集索引的根本区别是表中记录的排列顺序与索引的排列顺序是否一致。

聚集索引（CLUSTER INDEX）是指索引项的顺序与表中记录的物理顺序一致的索引组织。优点是查询速度快，因为一旦具有第一个索引值的纪录被找到，具有连续索引值的记录也一定物理的紧跟其后。用户可以在最经常查询的列上建立聚簇索引以提高查询效率。在一个基本表上最多只能建立一个聚簇索引。聚集索引的缺点是对表进行修改速度较慢，这是为了保持表中的记录的物理顺序与索引的顺序一致，而把记录插入到数据页的相应位置，必须在数据页中进行数据重排，降低了执行速度。

建议使用聚集索引的场合为：  
a.此列包含有限数目的不同值；  
b.查询的结果返回一个区间的值；  
c.查询的结果返回某值相同的大量结果集。
  
非聚集索引指定了表中记录的逻辑顺序，但记录的物理顺序和索引的顺序不一致，聚集索引和非聚集索引都采用了B+树的结构，但非聚集索引的叶子层并不与实际的数据页相重叠，而采用叶子层包含一个指向表中的记录在数据页中的指针的方式。非聚集索引比聚集索引层次多，添加记录不会引起数据顺序的重组。
建议使用非聚集索引的场合为：  
a.此列包含了大量数目不同的值；  
b.查询的结束返回的是少量的结果集；  
c.order by 子句中使用了该列。 


参考文档：  
[https://www.wolai.com/river1235r/xibxN7q5CswpPvoyDBhknU](https://www.wolai.com/river1235r/xibxN7q5CswpPvoyDBhknU)