# 简述 HTTP 1.0，1.1，2.0 的主要区别 #

# HTTP 1.0

1. 连接无法复用（不支持持久连接）
即一个请求只能使用一个 TCP 连接→每次都要三次握手加慢启动试探，对性能影响极大后HTTP 1.1出现持久化连接后有反向一直到了1.0上面，默认不启动，开启可以使用**Connection: KeepAlive**

2. 线头阻塞

  发生在一个TCP分节丢失，导致其后续分节不按序到达接收端的时候。该后续分节将被接收端一直保持直到丢失的第一个分节被发送端重传并到达接收端为止。该后续分节的延迟递送确保接收应用进程能够按照发送端的发送顺序接收数据→好处是保证了有序性，但是坏处是造成了请求阻塞

# HTTP 1.1

11.支持持久化连接【connection:close/keepAlive】

  一个TCP链接可以传送多个http请求和相应，减少了TCP建立链接和关闭链接的消耗。

2.支持http管道

  是对持久化连接开启后的请求管理手段

  - 在没有http管道时，请求在持久化连接中，只能遵循FIFO →B请求只能等待A请求得到响应后才能使用持久化的TCP连接

  - 使用http管道后，B请求无需等待A请求是否得到响应，直接请求服务器，但服务器端必须顺序的返回客户端的请求响应结果→即客户端可以并行，服务端串行

  - ❌ 缺点

    - 由于服务器串行→前一个响应会**阻塞其他所有响应**

    - 为了实现服务器串行，服务器得有一个缓存队列，但如果某一个响应非常大，就会**极大占用服务器资源**

    - 前面请求的失败由因为某些原因导致TCP连接的断开，会导致后续已经处理好的响应重新处理，造成**资源浪费**

3.使用多个TCP连接

  浏览器允许我们打开N个TCP链接（大多说浏览器是6个TCP链接，这个数字越大，客户端和服务器的资源占用越多，这个数据也只是感觉安全的数字而已）

  - ✅ 好处：提高了客户端以及服务器的并行能力

  - ❎ 缺点：增加了复杂度以及双方的性能消耗

4.相比HTTP 1.0 增加了些请求头和响应头

  Host：指明了请求将要发送到的服务器主机名和端口号

  Connection：长连接开关

  Range/If-Range/Content-Length/Content-Range等:支持断点续传

5.域名分区

  将原来集中到一个服务器上的资源分布到多个服务器上，这样就可以突破浏览器的链接限制（一般是6个），提高并行能力

# HTTP 2.0

1.支持多路复用

  只使用一个TCP和多路复用高效完成“多重的请求-响应消息”任务

2.将通信的基本单位缩小为帧

  将HTTP消息拆分为一个个帧，乱序发送到达目的地后再组装

3.首部压缩

  支持DEFLATE和HPACK 算法的压缩

4.服务端推送→节省多次HTTP请求的无关网络资源浪费

  客户端只需请求一次，服务端就能将这组请求所需的各种资源，按多个响应返回

  比如，浏览器只请求了index.html，但是服务器把index.html、style.css、example.png全部发送给浏览器。这样的话，只需要一轮 HTTP 通信，浏览器就得到了全部资源，提高了性能

5.请求优先级

  使用一个31比特的优先值,0表示最高优先级, 2(31)-1表示最低优先级，服务器端就可以根据优先级，控制资源分配，优先处理和返回最高优先级的请求帧给客户端

参考文档：  
[https://www.wolai.com/river1235r/tSiayRakLvEw3eGTeLcSRH](https://www.wolai.com/river1235r/tSiayRakLvEw3eGTeLcSRH)

[https://www.siques.cn/doc/598#%F0%9F%94%91HTTP%201.0%EF%BC%8C1.1%EF%BC%8C2.0%20%E7%9A%84%E5%8C%BA%E5%88%AB](https://www.siques.cn/doc/598#%F0%9F%94%91HTTP%201.0%EF%BC%8C1.1%EF%BC%8C2.0%20%E7%9A%84%E5%8C%BA%E5%88%AB)